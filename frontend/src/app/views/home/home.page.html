<ion-header class="ion-no-border" id="navbar">
    <ion-icon id="navbar-icon" src="assets\favicon_Blanco.svg"></ion-icon>
    <h2 id="navbar-text">Calendario</h2>
    <hr id="separation-title">
</ion-header>

<ion-content class='has-header has-subheader'>

    <ion-row>
        <!-- Atrás en el calendario -->
        <ion-col size="2">
            <ion-button fill="clear" (click)="back()">
                <ion-icon name="arrow-back" slot="icon-only"></ion-icon>
            </ion-button>
        </ion-col>

        <ion-col size="8" class="ion-text-center">
            <h2>{{ viewTitle }}</h2>
        </ion-col>

        <!-- Adelante en el calendario -->
        <ion-col size="2">
            <ion-button fill="clear" (click)="next()">
                <ion-icon name="arrow-forward" slot="icon-only"></ion-icon>
            </ion-button>
        </ion-col>
    </ion-row>

    <!-- Tabla de días -->
    <ng-template #colors let-view="view" let-row="row" let-col="col">

        <div id="divDays" [ngClass]="getCustomClass(view.dates[row*7+col].events)">

            {{view.dates[row*7+col].label}}
        </div>
    </ng-template>

    <!-- Eventos y proyectos -->
    <ng-template #sheduleAndProject let-showEventDetail="showEventDetail" let-selectedDate="selectedDate" let-noEventsLabel="noEventsLabel">
        <ion-list class="event-detail-container" has-bouncing="false" *ngIf="showEventDetail">
            <ion-item *ngFor="let event of selectedDate?.events" (click)="eventSelected(event)">


                <span *ngIf="event.projectId" class="event-detail">{{event.title}}</span>
                <ng-container *ngIf="event.titleShedule">
                    <ion-card>
                        <ion-card-header>
                            <h3 class="ion-float-right" *ngIf="event.roomAcronym!=''">{{event.roomAcronym}}</h3>
                            <ion-card-title>{{event.titleShedule}} </ion-card-title>

                        </ion-card-header>

                        <ion-card-content>
                            <h2 *ngIf="event.sheduleNote!=''"><b>Notas: </b>{{event.sheduleNote}} </h2>
                            <hr id="separation-title">
                            <h2 class="ion-float-right" *ngIf="event.sheduleHour!=''"> {{event.sheduleHour}} </h2>
                        </ion-card-content>
                    </ion-card>
                </ng-container>
            </ion-item>
            <ion-item *ngIf="selectedDate?.events.length==0">
                <div class="no-events-label">{{noEventsLabel}}</div>
            </ion-item>
        </ion-list>
    </ng-template>

    <!-- Implementación del calendario -->
    <calendar [monthviewDisplayEventTemplate]="colors" [monthviewEventDetailTemplate]="sheduleAndProject" [noEventsLabel]="calendar.noEventsLabel " [eventSource]="eventSource" [calendarMode]="calendar.mode" [currentDate]="calendar.currentDate" [startingDayMonth]="1"
        (onTitleChanged)="onViewTitleChanged($event)" startHour="6" endHour="20" step="30" startingDayWeek="1" (onTitleChanged)="onViewTitleChanged($event)">
    </calendar>

</ion-content>